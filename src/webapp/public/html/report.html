<!DOCTYPE html>
<html lang="ro" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <title>USA Accidents Smart Visualizer (AcS)</title>
    <link rel="stylesheet" type="text/css" href="../styles/report.css">

</head>
<body prefix="schema: https://schema.org">
<header>
    <div class="banner">
        <img src="../images/scholarly-html.svg" alt="Scholarly logo" style="width:227px;height:50px;">
        <div class="status">AcS project</div>
    </div>
    <h1>USA Accidents Smart Visualizer</h1>
</header>

<div role="contentinfo"><ol role="directory">
    <li><a href="#abstract"><span>1. </span>Descrierea proiectului</a></li>
    <li><a href="#introduction"><span>2. </span>Introducere</a></li>
    <li><a href="#structure"><span>3. </span>Structura</a><ol role="directory">
        <li><a href="#TehnologiiUtilizate"><span>3.1 </span>Tehnologii utilizate</a></li>
        <li><a href="#Pagini"><span>3.2 </span>Pagini</a>
    </ol></li><li><a href="#functionalitate"><span>4. </span>Funcționalități</a></li>
    <li><a href="#backend"><span>5. </span>Noțiuni speciale</a></li>
    <li><a href="#user"><span>6. </span>Experiența utilizatorului</a></li>
    <li><a href="#diagrame"><span>7. </span>Diagrame</a></li>
    <li><a href="#autori"><span>8. </span>Autori</a></li>
    <li><a href="#github"><span>9. </span>Link GitHub</a></li>
    <li><a href="#resurse"><span>10. </span>Resurse</a></li>
</ol>
</div>
<section id="abstract">
    <h2><span>1. </span>Descrierea proiectului</h2>
    <p>
        AcS (USA Accidents Smart Visualizer) este o aplicație web care permite utilizatorilor să vizualizeze date despre accidentele din USA din perioada 2016-2020.
    </p>
</section>
<section id="introduction" role="doc-introduction">
    <h2><span>2. </span>Introducere</h2>
    <p>
        Proiectul este un instrument Web de vizualizare flexibilă a datelor vizând accidentele din USA în perioada 2016-2020. Statisticile și vizualizările generate – în 5 maniere (donut chart, pie chart, bar chart, column chart, tabel) + redări cartografice pe baza unor servicii Web de profil – pot fi exportate în formatele CSV, WebP si SVG. Sistemul  oferă suport și pentru căutarea multi-criterială de incidente raportate.
        Datele utilizate se pot găsi la adresa <a href="https://www.kaggle.com/sobhanmoosavi/us-accidents">https://www.kaggle.com/sobhanmoosavi/us-accidents</a>.
    </p>
</section>
<section id="structure">
    <h2><span>3. </span>Structură</h2>
    <section id="Tehnologii utilizate">
        <h3><span>3.1 </span>Tehnologii utilizate</h3>
        <section id="html_css">
            <h4><span>3.1.1 </span>HTML & CSS</h4>
            <p>
                Pentru a crea interfața aplicației am folosit HTML și CSS.
            </p>
        </section>
        <section id="javascript">
            <h4><span>3.1.2 </span>Javascript</h4>
            <p>
                JavaScript este utilizat pentru a crea diagrame (folosind Google Charts) și pentru a stabili conexiunea
                și comunicarea între aplicație și baza de date.
            </p>
        </section>
        <section id="sqlite">
            <h4><span>3.1.3 </span>Sqlite & Sequelizer ORM</h4>
            <p>
                Pentru stocarea și extragerea datelor este utilizată o bază de date Sqlite.
            </p>
        </section>
        <section id="HTTP">
            <h4><span>3.1.3 </span>HTTP</h4>
            <p>
                Pentru crearea serverului
            </p>
        </section>
    </section>
</section>
<section id="Pagini">
    <h3><span>3.2 </span>Pagini</h3>
    <section id="home">
        <h4>Site-ul este compus din 4 pagini, iar navigarea între ele se poate face folosind bara de navigare.</h4>
        <ul>
            <li><a href="index.html">Home (pagina principala a aplicatiei)</a></li>
            <li><a href="report.html">Report (raportul)</a></li>
            <li><a href="contact.html">Contact (pagină ce permite vizualizarea datelor de contact ale autorilor)</a></li>
        </ul>
    </section>
</section>
</section>
<section id="functionalitate">
    <h2><span>4. </span>Funcționalitate</h2>
    <ol>
        <li>Aplicația rulează la 127.0.0.1:3000. Utilizatorul își poate alege tipul de date pe care dorește să îl vizualizeze și modul de vizualizare. În funcție de alegerile făcute, i se vor afișa datele cerute sau va primi o eroare deoarece datele introduse nu sunt corecte. </li>
        <li>De asemenea, utilizatorul poate salva statisticile și vizualizările într-un format ales de acesta (CSV, WebP, SVG), poate vizualiza raportul paginii web și pagina de contact.</li>
        <li>Panoul de administrare rulează la 127.0.0.1:3000/api/loginAdmin. După ce intră în cont, un administrator poate să adauge, să șteargă sau să modifice un accident, sau să importeze o bază de date.</li>
        <li>Maniere de vizualizare a datelor:</li>
        <ul>
            <li>Piechart: afișează numărul de accidente după anumite criterii, pentru minimum 2 state</li>
            <li>Barchart: afișează numărul de accidente după anumite criterii, pentru un singur stat</li>
            <li>Columnchart: afișează numărul de accidente după maxim 2-3 criterii</li>
            <li>Donutchart: afișează numărul de accidente după anumite criterii, pentru minimum 2 state</li>
            <li>Tabel: afișează orice fel de date, pentru oricâte state</li>
            <li>Hartă: afișează numărul de accidente pentru fiecare stat</li>
        </ul>
    </ol>
</section>

<section id="backend">
    <h2><span>5. </span>Arhitectura si procesul de construire al aplicatiei</h2>
    <ol>
        <li>A fost abordata o arhitectură bazată pe (micro)servicii. </li>
        <li>Codul sursă este structurat conform arhitecturii MVC.</li>
        <li>Pentru crearea diagramelor grafice din informațiile furnizate de utilizator a fost utilizat Google Charts. </li>
        <li>Backendul aplicației a fost realizat în Node.js. </li>
        <li>Am folosit GitHub ca sistem de stocare şi management online al codului-sursă.</li>

    </ol>
    <h3><span> 5.1 </span> Backend - API & Admin Panel</h3>
    Pentru realizarea CRUD API-ului, am recurs la Sequelizer, un ORM (Object Relation Model) care mapeaza tabelele existente in baza de date(accidents, admins) pe
    modelele descrise in /src/server/dtos/ . Am folosit paradigma MCV (Model, View, Controller) pentru proiectarea API-ului.
    <ol>
        <li> Model : Admin si Accident sunt descrierea schemei tabelelor aferente. </li>
        <li> Service : AdminService si AccidentService realizeaza operatiile pe baza de date, oferite de Sequelizer (findAll, count, save, update, destroy, etc..)</li>
        <li> Controller : Primeste ca parametru un request (pe care il parseaza), realizeaza interogarile necesare si trimite raspunsul inapoi.</li>
    </ol>
    Pentru request-uri, am folost XMLHttpRequest. Rutele folosite in comunicarea cu API-ul sunt dupa cum urmeaza:

    <table class="table table-bordered table-hover table-condensed">
        <thead><tr><th title="Field #1">ROUTE</th>
            <th title="Field #2">METHOD</th>
            <th title="Field #3">ACCESS</th>
            <th title="Field #4">ACTION</th>
            <th title="Field #5">JSON FORMAT</th>
        </tr></thead>
        <tbody><tr>
            <td>127.0.0.1:3000/api/getAll</td>
            <td>GET</td>
            <td>user</td>
            <td>get all accidents</td>
            <td>none</td>
        </tr>
        <tr>
            <td>127.0.0.1:3000/api/add</td>
            <td>POST</td>
            <td>ADMIN</td>
            <td>add accident</td>
            <td>see accident.json</td>
        </tr>
        <tr>
            <td>127.0.0.1:3000/api/delete</td>
            <td>GET</td>
            <td>ADMIN</td>
            <td>delete accident whose id=:id</td>
            <td> {&quot;id&quot; : id}</td>
        </tr>
        <tr>
            <td>127.0.0.1:3000/api/get</td>
            <td>POST</td>
            <td>update</td>
            <td>get accident whose id=:id</td>
            <td> {&quot;id&quot; : id}</td>
        </tr>
        <tr>
            <td>127.0.0.1:3000/api/update</td>
            <td>POST</td>
            <td>ADMIN</td>
            <td>update accident</td>
            <td> {&quot;id&quot; : id}</td>
        </tr>
        <tr>
            <td>127.0.0.1:3000/api/getWhere</td>
            <td> POST</td>
            <td> ADMIN</td>
            <td> get all accidents where condition</td>
            <td> {&quot;Severity&quot; : 2 &quot;Side&quot; : R ...}</td>
        </tr>
        <tr>
            <td>127.0.0.1:3000/api/getCount</td>
            <td>POST</td>
            <td>user</td>
            <td> get number of accidents in specific state</td>
            <td> {&quot;State&quot; : &quot;CA&quot;}</td>
        </tr>
        <tr>
            <td>127.0.0.1:3000/api/getCountYear</td>
            <td>POST</td>
            <td>user</td>
            <td> get number of accidents in specific state in specific year</td>
            <td> {&quot;State&quot; : &quot;CA&quot; &quot;Year&quot; : &quot;2019&quot;}</td>
        </tr>
        <tr>
            <td>127.0.0.1:3000/api/getByTemp</td>
            <td> POST</td>
            <td>user</td>
            <td> get number of accidents with specific filters and temperature in range</td>
            <td>{filters Temperature:&quot;75.5-76.0&quot;}</td>
        </tr>
        <tr>
            <td>127.0.0.1:3000/api/weather</td>
            <td>GET</td>
            <td>user</td>
            <td>get all weather types</td>
            <td>none</td>
        </tr>
        <tr>
            <td>127.0.0.1:3000/api/states</td>
            <td>GET</td>
            <td>user</td>
            <td>get all states</td>
            <td> none</td>
        </tr>
        </tbody></table>

    Aplicatia cuprinde si un admin panel, care poate fi accesat la: 127.0.0.1:3000/api/loginAdmin. Este necesara autentificarea unui admin ale carui credentiale
    exista in tabela admins din baza de date. Adminul poate introduce json-urile necesare pentru a adauga, sterge, modifica o instanta din tabelul accidente, si poate exporta datele
    (ca baza de date sau csv).

    <h3><span> 5.2 </span> Charts</h3>
    Aplicatia permite vizualizarea a 6 tipuri de reprezentari grafice (realizate prin intermediul Google Charts):
    <ol>
        <li>Map</li>
        <li>Table</li>
        <li>Bar Chart</li>
        <li>Column Chart</li>
        <li>Donut Chart</li>
        <li>Pie chart</li>
    </ol>
    Utilizatorul va primi o lista adaptata inputului sau (state si criterii). I.e., harta USA va fi disponibila doar pentru tagul ALL (in cadrul tagurilor de state);
    Reprezentarile grafice se randeaza si afiseaza in timp real (prin requesturi la API si parsarea datelor coresppunzatoare). Orice modificari vor fi afisate fara a fi necesara
    reincarcarea paginii.
    In aceeasi maniera adaptiva, fiecare reprezentare grafica poate fi exportata. (i.e. un tabel va putea fi exportat doar in format csv). Formatele disponibile sunt:
    <ol>
        <li>CSV : se realizeaza prin manipularea informatiilor din tabel si inserarea de virgula</li>
        <li>PNG : se realizeaza prin capturarea canvas-ului pe care a fost "desenata" reprezentarea</li>
        <li>WEBP: idem</li>
        <li>SVG : se realizeaza prin serializarea si transformarea in xml a reprezentarii (vectorizare)</li>
    </ol>
    <h3><span> 5.3 </span> Manipularea inputului de la user</h3>
    In cadrul aplicatiei, utilizatorul se poate decide asupra 3 campuri:
    <ol>
        <li> Statele referitor la care doreste sa vada informatii</li>
        <li> Criteriile pe care vrea sa le aplice acestor informatii</li>
        <li> Modul de vizualizare (sugerat)</li>
    </ol>
    1. Preluarea statelor dorite se realizeaza in cadrul unui textbox, care o data ce este introdus un acronim de stat (i.e. NY), il va valida si il va retine
    sub forma unui tag (care poate fi sters ulterior).
    2. Preluarea criteriilor se realizeaza prin intermediul unui "nested dropdown". Acesta contine toate criteriile puse la dispozitie userului, grupate dupa
    o oarecare familie logica. In momentul in care userul alege un astfel de criteriu, va fi afisat un camp in care utilizatorul este solicitat sa introduca
    valoarea acestui criteriu. (i.e Street : Liberty Street, Give_Way : False).
    3. Lista de modalitati de vizionare se adapteaza conform inputului de la pasii 1. si 2. Userul va putea alege una dintrea acestea; pentru a vizualiza rezultatul,
    va apasa pe butonul "View chart";

    <h3><span> 5.4 </span> Frontend and design</h3>
    Pentru realizarea designului aplicatiei, am folosit HTML5, CSS si Javascript. Designul este simplu si potrivit pentru functionalitatea aplicatiei.


</section>
<section id="user">
    <h2><span>6. </span>Experiența utilizatorului</h2>
    <ol>
        <li>Site-ul are un design minimalist, ceea ce îl face ușor de folosit de catre un utilizator. </li>
        <li>Structura site-ului este una simplă și intuitivă. Pe pagina de landing, utilizatorul are acces la toate funcționalitățile site-ului. </li>
        <li>Utilizatorul alege statele pentru care doreste sa vada informatiile, filtrele pe care vrea sa le aplice si formatul in care vrea sa vada datele.</li>
        <li>Utilizatorul va primi reprezentarea grafica dorita, si va avea obtiunile de export : webp, csv, png, svg</li>
        <li>Utilizatorul poate naviga între paginile site-ului foarte ușor, folosind bara de navigare. </li>
        <li>Pentru a vizualiza diagramele, tabelele și harta nu este nevoie de crearea unui cont. De asemenea, acestea pot fi salvate în diferite formate pentru ca utilizatorul să le poată distribui mai departe sau pentru a putea fi vizualizate mai târziu fără să trebuiască să introducă din nou filtrele.</li>
    </ol>
</section>
<section id="diagrame">
    <h2><span>7. </span>Diagrame</h2>
    <img alt="diagram" src = "../images/diagram.png">
    <h3>Admin</h3>
    <img alt="admin" src = "../images/admin.png" style="width:600px;height:500px;">
    <h3>Utilizator</h3>
    <img alt="user" src = "../images/user.png" style="width:800px;height:500px;">
</section>
<section id="autori">
    <h2><span>8. </span>Autori</h2>
    <ul>
        <li>Mocanu Diana - API, admin panel, charts, application layout & architecture, report page, exports</li>
        <li>Pricop Ana - tags, column chart,user input manipulation, navigation bar, application layout</li>
        <li>Olaru Andreea - donut chart, bar chart, exports, report page, application layout</li>
    </ul>
</section>
<section id="github">
    <h2><span>9. </span>GitHub Repository</h2>
    <a href="https://github.com/dianamocanu05/Proiect-TW">Click</a>
</section>
<section id="resurse">
    <h2><span>10. </span>Resurse</h2>
    <p class="issue">
        <a href=https://developers.google.com/chart>Google Charts documentation</a>
    </p>
    <p class="issue">
        <a href=https://realpython.com/python-csv/>CSV manipulation</a>
    </p>
    <p class="issue">
        <a href="https://www.tutorialspoint.com/sqlite/sqlite_create_database.htm">Database creation & manipulation</a>
    </p>
    <p class="issue">
        <a href="https://www.sqlitetutorial.net/sqlite-nodejs/query/">Querying database</a>
    </p>
    <p class="issue">
        <a href="https://profs.info.uaic.ro/~busaco/teach/courses/web/web-film.html">Cursuri Tehnologii Web</a>
    </p>
    <p class="issue">
        <a href=https://w3c.github.io/scholarly-html/#semantics>Template Scholarly</a>
    </p>
</section>


</body>
</html>